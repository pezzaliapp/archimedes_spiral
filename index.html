<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover">
  <title>Archimedes Spiral — PWA</title>
  <meta name="theme-color" content="#0b1022">
  <meta name="description" content="Spirale di Archimede interattiva — PWA offline con parametri modificabili.">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="brand">
      <img src="icons/icon-192.png" alt="Icona" width="28" height="28">
      <h1>Archimedes Spiral</h1>
    </div>
    <button id="btnInstall" class="ghost" title="Installa">⬇️ Installa</button>
  </header>

  <main>
    <section class="controls card">
      <div class="row">
        <label>a <small>(offset)</small>
          <input type="range" id="a" min="-200" max="200" step="1" value="0">
          <input type="number" id="aNum" min="-200" max="200" step="1" value="0">
        </label>
        <label>b <small>(passo)</small>
          <input type="range" id="b" min="1" max="30" step="0.5" value="6">
          <input type="number" id="bNum" min="1" max="30" step="0.5" value="6">
        </label>
        <label>Giri
          <input type="range" id="turns" min="1" max="30" step="1" value="10">
          <input type="number" id="turnsNum" min="1" max="30" step="1" value="10">
        </label>
      </div>
      <div class="row">
        <label>Passo θ
          <input type="range" id="tStep" min="0.001" max="0.1" step="0.001" value="0.01">
          <input type="number" id="tStepNum" min="0.001" max="0.1" step="0.001" value="0.01">
        </label>
        <label>Scala
          <input type="range" id="scale" min="0.5" max="2" step="0.01" value="1">
          <input type="number" id="scaleNum" min="0.5" max="2" step="0.01" value="1">
        </label>
        <label>Rotazione
          <input type="range" id="rot" min="0" max="360" step="1" value="0">
          <input type="number" id="rotNum" min="0" max="360" step="1" value="0">
        </label>
      </div>
      <div class="row">
        <label>Colore linea
          <input type="color" id="lineColor" value="#2dd4bf">
        </label>
        <label>Spessore
          <input type="range" id="lineW" min="1" max="6" step="1" value="2">
        </label>
        <label>
          <input type="checkbox" id="asPoints">
          Solo punti
        </label>
        <label>
          <input type="checkbox" id="scanlines">
          Barre verticali
        </label>
        <label>
          <input type="checkbox" id="animate">
          Anima
        </label>
        <button id="btnReset" class="ghost">Reset</button>
      </div>
    
      <div class="row">
        <label>Preset
          <select id="presetSelect"></select>
        </label>
        <button id="btnAutoQuality" class="ghost">Qualità Auto</button>
        <label>Nome preset
          <input type="text" id="presetName" placeholder="es. Demo elegante">
        </label>
        <button id="btnSavePreset" class="ghost">Salva preset</button>
        <button id="btnDeletePreset" class="ghost">Elimina preset</button>
        <span class="spacer"></span>
        <button id="btnExportPNG" class="ghost">Esporta PNG</button>
        <button id="btnExportSVG" class="ghost">Esporta SVG</button>
      </div>

    
      <div class="row">
        <label>
          <input type="checkbox" id="mode3d">
          3D (elica)
        </label>
        <label>z per giro
          <input type="range" id="zPerTurn" min="-400" max="400" step="1" value="120">
          <input type="number" id="zPerTurnNum" min="-400" max="400" step="1" value="120">
        </label>
        <label>Prospettiva (FOV)
          <input type="range" id="fov" min="200" max="1400" step="10" value="700">
          <input type="number" id="fovNum" min="200" max="1400" step="10" value="700">
        </label>
        <label>Vel. rotazione X (°/s)
          <input type="range" id="rxSpeed" min="-180" max="180" step="1" value="0">
          <input type="number" id="rxSpeedNum" min="-180" max="180" step="1" value="0">
        </label>
        <label>Vel. rotazione Y (°/s)
          <input type="range" id="rySpeed" min="-180" max="180" step="1" value="18">
          <input type="number" id="rySpeedNum" min="-180" max="180" step="1" value="18">
        </label>
        <label>Vel. rotazione Z (°/s)
          <input type="range" id="rzSpeed" min="-180" max="180" step="1" value="0">
          <input type="number" id="rzSpeedNum" min="-180" max="180" step="1" value="0">
        </label>
      </div>
    
    
      <div class="row">
        <label>Qualità
          <select id="quality">
            <option value="low">Bassa</option>
            <option value="med" selected>Media</option>
            <option value="high">Alta</option>
          </select>
        </label>
        <button id="btnAutoQuality" class="ghost">Qualità Auto</button>
        <label>Gradiente colore
          <select id="gradientMode">
            <option value="none" selected>Nessuno</option>
            <option value="depth">Profondità</option>
            <option value="radius">Distanza dal centro</option>
          </select>
        </label>
        <button id="btnAutoQuality" class="ghost">Qualità Auto</button>
        <label>
          <input type="checkbox" id="autoDemo">
          Demo automatica (screensaver)
        </label>
        <div></div>
        <button id="btnRecordWebM" class="ghost">Rec WebM</button>
        <button id="btnStopRecord" class="ghost" disabled>Stop</button>
        <button id="btnFramesZip" class="ghost">PNG frames (zip)</button>
        <button id="btnExportGIF" class="ghost">Export GIF (beta)</button>
      </div>

    </section>

    <section class="stage card">
      <canvas id="canvas"></canvas>
    </section>

    <section class="about card">
      <h2>Cos'è</h2>
      <p>La spirale di Archimede è definita da <code>r = a + b·θ</code>. Con i controlli sopra
      puoi modificare i parametri e vedere il risultato in tempo reale. Installa la PWA per usarla offline.</p>
    </section>
  </main>

  <footer>
    <small>© 2025 — Archimedes Spiral (PWA) · MIT License</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
